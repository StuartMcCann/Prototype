<h1 class="heading add-margin">Check out who's actively recruiting here!</h1>
<div class="container  ">

    <div id="myGrid" class="ag-theme-alpine" style="height: 600px; width:1100px;"></div>

</div>
<script type="text/javascript" charset="utf-8">
        // specify the columns
        const columnDefs = [
            {
                field: "jobTitle", sortable: true, filter: true,
                cellRenderer: function (params) {
                     var url = '@Url.Action("JobProfile", "Job", new { id = "replaceToken" })';
                    url = url.replace("replaceToken", params.data.jobId);
                    return '<a href="'+url+'">' + params.value + '</a>'
                }
            },
            {
                field: "companyName", sortable: true, filter: true,

                 cellRenderer: function (params) {
                     var url = '@Url.Action("Index", "Employer", new { id = "replaceToken" })';
                    url = url.replace("replaceToken", params.data.employerId);
                    return '<a href="'+url+'">' + params.value + '</a>'
                }


            },
            { field: "rating", sortable: true, filter: true },
            { field: "lowerRate", sortable: true, filter: true },

            { field: "upperRate", sortable: true, filter: true },

            { field: "duration", sortable: true, filter: true },
            { field: "jobDescription", sortable: true, filter: true }

            ];



        // let the grid know which columns to use
        const gridOptions = {
            columnDefs: columnDefs
        };

        // lookup the container we want the Grid to use
        const eGridDiv = document.querySelector('#myGrid');

        // create the grid passing in the div to use together with the columns & data we want to use
        new agGrid.Grid(eGridDiv, gridOptions);

         //fetch the row data to use and one ready provide it to the Grid via the Grid API
        //agGrid.simpleHttpRequest({ url: 'https://www.ag-grid.com/example-assets/row-data.json' })
        //    .then(data => {
        //        gridOptions.api.setRowData(data);
        //    });

        agGrid.simpleHttpRequest({ url: '@Url.Action("GetAllLiveJobs", "Job")' })
            .then(data => {
                gridOptions.api.setRowData(data);
            });
          $.ajax({
            url: '/Job/GetAllLiveJobs',
            dataType: "Json",
            type: "GET",
            data: "",
            contentType: 'application/x-www-form-urlencoded',
            cache: false,
            //this needs changed whe table fully normalised

            success: function (data) {
                  console.log(data)


            }, //end of success function
            error: function (xhr) {
                alert( 'error');
            }

        }); //end ajax



</script>





