@model Prototype.Models.Contract 

<script type="text/javascript">
    //ajax for update button

     $('#endContract').click(function () {


               
               
                $("#endContract").html(
                    '<div id="like">'+
                       ' <button type="button" class="btn btn-primary">UnLike <i class="fas fa-minus-circle"></i></button>'+
                    '</div>'
                );

               


            },
            error: function (jqxhr, status, exception) {
                alert('Exception:', exception);

            }


       
        }); //end click






</script>

<div class=" container  text">

    <h1 class=" heading buffer"> Your Contract with @Model.Candidate.ApplicationUser.FirstName</h1>

    <div class="row buffer add-margin">

        <div class="col-sm-6  ">

            <h3>Contract Details</h3>

            <h6>Status: @if(Model.IsUnderContract){ <span>In Progress</span> }
            else {<span>Completed</span> }</h6>
            <h6>Colleague: @Model.Candidate.ApplicationUser.FirstName   @Model.Candidate.ApplicationUser.LastName</h6>
            <h6>Current Rate: @Model.AgreedRate</h6>
            <h6>Job: @Model.Job.JobTitleEnum</h6>
            <h6>Start Date: @Model.StartDate.ToShortDateString()</h6>
            @if (!Model.IsUnderContract)
            {
                <h6>End Date: @Model.EndDate.ToShortDateString()</h6>
            }

        </div>

        <div class="col-sm-5 border">

            <h3>Actions</h3>
            

            @if (Model.IsUnderContract)
            {
        <div class="container-fluid">
            <form asp-action="UpdateRate" asp-controller="Contract" method="post">
                <div class="row border buffer add-margin ">


                    <label class=" form-label">Ammend Rate</label>
                    <div class="  form-group " style="width: 100%">

                        <input class="border form-control" required name="rate" type="number" placeholder="@Model.EndDate" />
                    </div>
                    <div class=" form-group">
                        <input asp-for="ContractId" data-val="true" value="@Model.ContractId" type="hidden" />
                    </div>

                    <button id="update" type="submit" class=" add-margin btn btn-primary float-right"> Update</button>

                </div>
            </form>

            <!--End contract -->
            <form asp-action="CompleteContract" asp-controller="Contract" method="post">
                <div class="row border buffer add-margin">
                    <label class="form-label">End Date</label>
                    <div class=" input-group">


                        <input required name="endDate" type="date" class="form-control" />
                    </div>
                    <div>
                        <label class=" form-label">Please Rate This Contractor</label>
                        <div class="  form-group " style="width: 100%">
                            @Html.Hidden("contractId", Model.ContractId)
                            <input class="border form-control" required name="rating" type="number" min="1" max="5" placeholder="Max Rating: 5" />
                        </div>

                    </div>


                    <button id="update" type="submit" class=" add-margin btn btn-primary float-right"> End Contract</button>



                </div>
            </form>
           
        </div>
            }else if(!Model.IsUnderContract && !Model.IsRatedByEmployer)
            {
                //rate candidate 
            }
            else if (Model.IsRatedByEmployer && !Model.IsUnderContract)
            {
                //contract completed and rated so link to candidate contact details 
                <h5>This contract is completed!</h5>

                <h5>If you need to get in touch again you can message here! </h5>
            }

        </div>


    </div>



</div>